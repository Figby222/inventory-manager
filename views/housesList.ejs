<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title><%= title %></title>
    </head>
    <body>
        <header>
            <%- include("navbar") %>
        </header>
        <main>
            <h1 class="main-heading"><%= title %></h1>
            <form class="houses-search" action="/houses/search" method="GET">
                <%- include("errors") %>
                <h2 class="filter-search">Filter Search</h2>
                <fieldset class="main-info">
                    <h3 class="main-info-heading">Main Info</h3>
                    <label for="title">Title: </label>
                    <input type="text" name="title" id="title" />
                    <label for="minimum-price">Minimum Price: </label>
                    <select name="minimum_price" id="minimum-price">
                        <option value="">--Please choose an option--</option>
                        <option value="100000">100,000</option>
                        <option value="200000">200,000</option>
                        <option value="300000">300,000</option>
                        <option value="400000">400,000</option>
                        <option value="500000">500,000</option>
                        <option value="600000">600,000</option>
                        <option value="700000">700,000</option>
                        <option value="800000">800,000</option>
                        <option value="900000">900,000</option>
                        <option value="1000000">1,000,000</option>
                        <option value="1500000">1,500,000</option>
                        <option value="2000000">2,000,000</option>
                        <option value="2500000">2,500,000</option>
                        <option value="5000000">5,000,000</option>
                        <option value="10000000">10,000,000</option>
                        <option value="64000000">64,000,000</option>
                    </select>
                    <label for="maximum-price">Maximum Price:</label>
                    <select name="maximum_price" id="maximum-price">
                        <option value="">--Please choose an option--</option>
                        <option value="100000">100,000</option>
                        <option value="200000">200,000</option>
                        <option value="300000">300,000</option>
                        <option value="400000">400,000</option>
                        <option value="500000">500,000</option>
                        <option value="600000">600,000</option>
                        <option value="700000">700,000</option>
                        <option value="800000">800,000</option>
                        <option value="900000">900,000</option>
                        <option value="1000000">1,000,000</option>
                        <option value="1500000">1,500,000</option>
                        <option value="2000000">2,000,000</option>
                        <option value="2500000">2,500,000</option>
                        <option value="5000000">5,000,000</option>
                        <option value="10000000">10,000,000</option>
                        <option value="64000000">64,000,000</option>
                    </select>
                    <label for="minimum-bedroom-count">Minimum Bedrooms: </label>
                    <input type="number" name="minimum_bedrooms" id="minimum-bedroom-count" min="0" step="0.5" />
                    <label for="maximum-bedroom-count">Maximum Bedrooms: </label>
                    <input type="number" name="maximum_bedrooms" id="maximum-bedroom-count" min="0" step="0.5" />
                    <label for="minimum-square-footage">Minimum Square Ft.: </label>
                    <input type="number" name="minimum_square_footage" id="minimum-square-footage" min="0" step="100" />
                    <label for="maximum-square-footage">Maximum Square Ft.: </label>
                    <input type="number" name="maximum_square_footage" id="maximum_square_footage" min="0" step="100" />
                </fieldset>
                <fieldset class="details">
                    <h3 class="details-heading">Details</h3>
                    <label for="furniture-status">Furniture Status: </label>
                    <select name="furniture_status" id="furniture-status">
                        <option value="">--Any--</option>
                        <option value="not furnished">Not Furnished</option>
                        <option value="partially furnished">Partially Furnished</option>
                        <option value="fully furnished">Fully Furnished</option>
                    </select>
                </fieldset>
                <fieldset>
                    <h3 class="amenities-header">Amenities</h3>
                    <ul class="amenities-list">
                        <% amenities.forEach((amenity) => { %>
                            <li>
                                <input type="checkbox" name="amenity_ids" id="<%= amenity.amenity_name %>" value="<%= amenity.id %>" />
                                <label for="<%= amenity.amenity_name %>" class="amenity-label"><%= amenity.amenity_name %></label>
                            </li>
                        <% }) %>
                    </ul>
                </fieldset>
                <fieltset>
                    <h3 class="categories-header">Categories</h3>
                    <ul class="categories-list">
                        <% amenities.forEach((category) => { %>
                            <li>
                                <input type="checkbox" name="categories" id="<%= category.category_name %>" value="<%= category.id %>" />
                                <label for="<%= category %>" class="category-label"><%= category %></label>
                            </li>
                        <% }) %>
                    </ul>
                </fieltset>
                <button type="submit">Search</button>
            </form>
            <% if (locals.houses) { %>
                <section class="houses">
                    <ul aria-label="houses">
                        <% houses.forEach((house) => { %>
                            <% if (house.images && house.images.length > 1) { %>
                                <ul class="images" aria-label="images">
                                    <% house.images.forEach((image_href, index) => { %>
                                        <li>
                                            <img class="house-image" href="<%= image_href %>" alt="Image of house" />
                                        </li>
                                    <% }) %>
                                </ul>
                            <% } %>
                            <li class="house-info">
                                <h2 class="address">Address: <%= house.address %></h2>
                                <p class="bedroom_count"><%= house.bedroom_count %> bedrooms</p>
                                <p class="bathroom_count"><%= house.bathroom_count %>bathrooms</p>
                                <p class="square-footage">Square Footage: <%= house.square_footage %> Square Feet</p>
                            </li>
                            <a href="/houses/<%= house.houseId %>">More Info</a>
                        <% }) %>
                    </ul>
                </section>

            <% } else { %>
                <p class="no-houses-found">
                    No houses found
                </p>
            <% } %>
        </main>
    </body>
</html>